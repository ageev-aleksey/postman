stages:
  - build
  - unit_testing
  - functional_testing





server_build:
  stage: build
  before_script:
    - apt-get update --yes
    - apt-get install build-essential --yes
    - apt-get install gcc-4.8  --yes
    - apt-get install lcov --yes
    - ./server/depends.sh
  script:
    - cd server
    - make mkdir
    - make

server_unit_testig:
  stage: unit_testing
  before_script:
    - apt-get update
    - apt-get install build-essential --yes
    - apt-get install lcov --yes
  script:
    - cd server
    - valgrind --leak-check=full ./bin/test.out
    - lcov -t "server testing code coverage" -o server_coverage.info -c -d .
    - genhtml -o report server_coverage.info  
